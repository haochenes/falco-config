# Falco Cross-Compilation Configuration
# Edit this file to configure your cross-compilation environment

# =============================================================================
# Sysroot Configuration
# =============================================================================
# Path to the target sysroot (containing target libraries and headers)
SYSROOT="/opt/ti-processor-sdk-linux-adas-j721e-evm-09_02_00_05/linux-devkit/sysroots/aarch64-oe-linux"

# =============================================================================
# Cross-Compiler Configuration
# =============================================================================
# Path to the cross-compiler toolchain directory
CROSS_COMPILE_PREFIX="/opt/cross-compile/arm-gnu-toolchain-11.3.rel1-x86_64-aarch64-none-linux-gnu/"

# Cross-compiler target triple
CROSS_COMPILE_TRIPLE="aarch64-none-linux-gnu"

# =============================================================================
# Build Configuration
# =============================================================================
# Build type: Release, Debug, RelWithDebInfo, MinSizeRel
BUILD_TYPE="Release"

# Number of parallel jobs (default: auto-detect)
# JOBS=8

# Strip binary after build (ON/OFF)
STRIP_BINARY="ON"

# =============================================================================
# Falco Build Options
# =============================================================================
# Build driver (requires kernel headers)
BUILD_DRIVER="OFF"

# Build BPF probe
BUILD_BPF="OFF"

# Build modern BPF (no .ko on board; use engine.kind: modern_ebpf). ON needs clang + host generators; cross-compile may fail with events_dimensions_generator until falcosecurity-libs fix. Set OFF to get aarch64 binary (use kmod/nodriver on board).
BUILD_MODERN_BPF="OFF"

# Minimal build. Use ON to reduce deps and get binary; use OFF when BUILD_MODERN_BPF=ON.
MINIMAL_BUILD="ON"

# =============================================================================
# Falco kernel module (falco.ko) for target board
# =============================================================================
# When BUILD_MODERN_BPF=OFF, use engine.kind: kmod on board and need falco.ko.
# Set BUILD_KMOD=ON and LINUX_KERNEL_SRC to the target kernel tree; ./build_falco.sh all will then build falco.ko.
# When BUILD_MODERN_BPF=ON, leave BUILD_KMOD=OFF (no .ko needed).
BUILD_KMOD="ON"

# Path to target Linux kernel source (same kernel running on the board, e.g. TDA4 ti-linux-kernel).
# Required when BUILD_KMOD=ON. Kernel must be built or at least 'make modules_prepare' done.
# After 'make linux' in ~/work/tda4-bsp/bsp, use:
LINUX_KERNEL_SRC="/home/carlos/work/tda4-bsp/bsp/ti-linux-kernel"
